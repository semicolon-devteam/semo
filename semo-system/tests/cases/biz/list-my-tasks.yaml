# SEMO Test Case: list-my-tasks
# 할당된 작업 목록 조회 테스트

name: list-my-tasks
description: 로그인 사용자에게 할당된 Open 이슈 목록 조회
category: biz/management
tags:
  - core
  - routing
  - gh-cli

input: "내 할당된 작업 확인해줘"

expected:
  routing:
    layer: biz
    package: management

  skill: list-my-tasks

  output:
    contains:
      - "## 할당된 작업"
      - "| 레포 | # | 제목"
      - "총 할당 작업"
    pattern: "\\d+건"

  sideEffects:
    ghCommands:
      - pattern: "gh api graphql"
        contains: "assignee:@me"

mock:
  ghApiResponse: |
    {
      "data": {
        "search": {
          "issueCount": 3,
          "nodes": [
            {
              "number": 123,
              "title": "로그인 페이지 구현",
              "repository": { "name": "cm-land" },
              "labels": { "nodes": [{ "name": "feature" }] }
            },
            {
              "number": 45,
              "title": "결제 버그 수정",
              "repository": { "name": "cm-office" },
              "labels": { "nodes": [{ "name": "bug" }] }
            }
          ]
        }
      }
    }
  currentUser: reus
