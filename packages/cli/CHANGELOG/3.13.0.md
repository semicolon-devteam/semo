# v3.13.0 - DB 기반 스킬 설치

## 주요 변경사항

### Breaking Change: 스킬 설치 방식 변경

**기존 (v3.12.0 이하):**
- `semo-system/semo-skills/` 폴더의 **모든 스킬** (75개) 설치
- 파일 시스템 기반

**변경 (v3.13.0):**
- `skill_definitions` 테이블의 **활성 스킬만** (19개) 설치
- DB 기반 제어 (폴백 지원)

### 새로운 테이블

`skill_definitions` 테이블 추가:

```sql
CREATE TABLE skill_definitions (
  id UUID PRIMARY KEY,
  name VARCHAR(100) NOT NULL UNIQUE,
  display_name VARCHAR(100),
  description TEXT,
  category VARCHAR(50),  -- workflow, discovery, planning, solutioning, implementation, supporting
  source_path VARCHAR(200),
  is_active BOOLEAN DEFAULT true,
  is_required BOOLEAN DEFAULT false,
  install_order INT DEFAULT 100
);
```

### 핵심 스킬 목록 (19개)

| Category | 스킬 |
|----------|------|
| Workflow | workflow-start, workflow-progress, workflow-resume |
| Discovery | ideate |
| Planning | create-epic, design-user-flow, generate-mockup |
| Solutioning | scaffold-domain, validate-architecture, generate-spec, design-tests |
| Implementation | create-sprint, start-task, review-task, write-code, run-code-review, close-sprint |
| Supporting | git-workflow, notify-slack |

### 폴백 동작

DB 연결 실패 시 하드코딩된 19개 스킬 목록 사용:
- `FALLBACK_SKILLS` in `supabase.ts`

## 마이그레이션 필요

```bash
# 1. DB 마이그레이션 실행
# supabase/migrations/20260120002_skill_definitions.sql

# 2. CLI 업데이트
npm i -g @team-semicolon/semo-cli@latest

# 3. 프로젝트 재설치
cd your-project
rm -rf semo-system .claude
semo init
```

## 레거시 스킬

기존 75개 스킬 중 19개만 핵심 스킬로 선정:
- 나머지 56개는 `is_active=false`로 설정하거나 별도 Extension으로 분리 가능
- 필요 시 `skill_definitions` 테이블에 추가하여 활성화

## 관련 파일

- `supabase.ts`: `getActiveSkills()`, `FALLBACK_SKILLS` 추가
- `index.ts`: `createStandardSymlinks()` DB 기반으로 변경
- `supabase/migrations/20260120002_skill_definitions.sql`: 테이블 및 시드 데이터
